USER=nobody
CCFLAGS+=-ggdb -O0 -m32 -D FORTIFY_SOURCE=0 -fno-stack-protector
.PHONY: rights clean

all: main rights

main: main.c
	@echo "Compiling task..."
	@$(CC) $(CCFLAGS) -o main main.c 

rights: main
	@echo "Changing rights..."
	@chown "$(USER)" main
	@chmod u=rwx,g=rx,o=rx main
	@chmod u+s main
	@chattr -i main

clean:
	@echo "Cleaning..."
	@rm -f *.o
	@rm -f main
